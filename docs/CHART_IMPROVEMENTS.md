# 수익 추이 차트 개선 사항

## 문제점 분석

### 1. 큰 금액 표시 문제
- 금액이 커질수록 Y축 레이블이 화면을 넘어감
- 예: 50,000,000원 → "50000000" 으로 표시되어 가독성 저하

### 2. 가시성 문제
- 3개의 라인이 겹쳐서 구분이 어려움
- 중요한 정보(현재 수익률, 최고/최저값)가 즉시 보이지 않음
- 툴팁 정보가 부족

### 3. UX 문제
- 기간 선택이 제한적 (1주일 옵션 없음)
- 차트 타입 변경 불가
- 모바일에서 가독성 저하

---

## 개선 사항

### ✅ 1. 스마트한 금액 포맷팅

#### Y축 자동 단위 변환
```typescript
const formatYAxis = (value: number) => {
  const abs = Math.abs(value)

  if (abs >= 100000000) return `${(value / 100000000).toFixed(1)}억`
  if (abs >= 10000000) return `${(value / 10000000).toFixed(1)}천만`
  if (abs >= 1000000) return `${(value / 1000000).toFixed(1)}백만`
  if (abs >= 10000) return `${(value / 10000).toFixed(0)}만`
  if (abs >= 1000) return `${(value / 1000).toFixed(0)}천`

  return value.toString()
}
```

**효과:**
- 50,000,000원 → "5천만"
- 150,000,000원 → "1.5억"
- 화면 공간 효율적 사용
- 한눈에 금액 파악 가능

---

### ✅ 2. 통계 요약 섹션 추가

차트 위에 주요 통계를 한눈에 표시:

```
┌─────────────────────────────────────────────────────┐
│ 현재 수익      │ 최고 평가액   │ 최저 평가액   │ 평균 일일변동 │
│ +₩5,234,567   │ ₩152,345,678 │ ₩145,123,456 │ +₩123,456   │
│ (+12.3% ↑)    │               │               │             │
└─────────────────────────────────────────────────────┘
```

**효과:**
- 스크롤 없이 핵심 정보 확인
- 수익률과 변동성을 즉시 파악
- 의사결정에 필요한 정보 강조

---

### ✅ 3. 향상된 툴팁

**기존:**
```
날짜: 2025-01-15
값: ₩50,234,567
```

**개선:**
```
┌─────────────────────────────┐
│ 2025년 1월 15일              │
├─────────────────────────────┤
│ 총 평가액: ₩152,345,678     │
│ 투자금:    ₩145,000,000     │
│ 수익:      +₩7,345,678      │
│ 일일 변동:  +₩234,567       │
└─────────────────────────────┘
```

**효과:**
- 관련 정보를 한 번에 확인
- 색상으로 수익/손실 즉시 구분
- 상세한 분석 가능

---

### ✅ 4. 차트 타입 선택

**영역 차트 (Area Chart):**
- 총 평가액의 변화를 면적으로 표시
- 투자금 대비 평가액 차이를 시각적으로 강조
- 수익 구간을 그라데이션으로 표현

**선형 차트 (Line Chart):**
- 평가액, 투자금, 수익금을 3개 라인으로 표시
- 정확한 값 비교에 유리
- 깔끔한 시각화

**효과:**
- 사용자 선호도에 따라 선택
- 데이터 특성에 맞는 시각화
- 더 나은 인사이트 도출

---

### ✅ 5. 확장된 기간 옵션

**기존:** 1개월, 3개월, 6개월, 1년, 전체

**개선:** **1주**, 1개월, 3개월, 6개월, 1년, 전체

**효과:**
- 단기 변동성 모니터링
- 일일 트레이더를 위한 세밀한 분석
- 다양한 투자 전략 지원

---

### ✅ 6. 반응형 디자인 개선

#### 데스크톱
```
┌────────────────────────────────────────┐
│ 수익 추이            [영역] [선형]      │
├────────────────────────────────────────┤
│ [통계 4개 가로 배치]                    │
├────────────────────────────────────────┤
│ [1주] [1개월] [3개월] [6개월] [1년] [전체]│
├────────────────────────────────────────┤
│                                        │
│         [차트 - 높이 400px]            │
│                                        │
└────────────────────────────────────────┘
```

#### 모바일
```
┌──────────────────┐
│ 수익 추이         │
│ [영역] [선형]     │
├──────────────────┤
│ [통계 2x2 그리드] │
├──────────────────┤
│ [기간 선택]       │
├──────────────────┤
│                  │
│   [차트]         │
│   (스크롤)       │
│                  │
└──────────────────┘
```

**효과:**
- 모든 화면 크기에서 최적화
- 정보 밀도 유지
- 터치 친화적 인터페이스

---

### ✅ 7. 색상 시스템 개선

#### 의미 있는 색상 사용
- 🟢 초록색: 수익, 상승 (긍정)
- 🔴 빨간색: 손실, 하락 (부정)
- 🔵 파란색: 평가액 (중립)
- ⚫ 회색: 투자금 (기준선)
- 🟠 오렌지: 최저값 (주의)

#### 접근성 고려
- 색맹 사용자를 위한 아이콘 추가 (↑↓)
- 충분한 명암 대비
- 대시 라인으로 구분 강화

---

## 사용 방법

### 기본 사용

```tsx
import { ProfitChartImproved } from '@/components/dashboard/profit-chart-improved'

const data = [
  {
    date: '2025-01-01',
    totalValue: 50000000,
    totalInvestment: 45000000,
    totalProfit: 5000000,
    dailyProfit: 100000,
  },
  // ...
]

export default function DashboardPage() {
  return (
    <div>
      <ProfitChartImproved data={data} market="KRX" />
    </div>
  )
}
```

### Props

```typescript
interface ProfitChartProps {
  data: ProfitChartData[]  // 차트 데이터
  market?: 'KRX' | 'US'    // 통화 구분 (기본값: KRX)
}

interface ProfitChartData {
  date: string              // 날짜 (ISO 8601)
  totalValue: number        // 총 평가액
  totalInvestment: number   // 총 투자금
  totalProfit: number       // 총 수익
  dailyProfit?: number      // 일일 수익 변동 (선택)
}
```

---

## 비교표

| 항목 | 기존 | 개선 |
|------|------|------|
| Y축 포맷 | 50000000 | 5천만 |
| 통계 요약 | ❌ 없음 | ✅ 4가지 핵심 지표 |
| 툴팁 정보 | 1개 값 | 4개 값 + 색상 구분 |
| 차트 타입 | Line만 | Line + Area |
| 기간 옵션 | 5개 | 6개 (1주 추가) |
| 차트 높이 | 300px | 400px |
| 모바일 최적화 | 보통 | 우수 |
| 색상 의미 | 약함 | 강함 |

---

## 추가 개선 아이디어

### 1. 수익률 라인 추가
- 금액 대신 수익률(%) 표시 옵션
- 이중 Y축으로 금액과 수익률 동시 표시

### 2. 비교 기능
- 이전 기간과 비교 (YoY, MoM)
- 벤치마크 지수와 비교 (S&P 500, KOSPI)

### 3. 인터랙티브 기능
- 차트에서 드래그하여 특정 구간 확대
- 클릭하여 해당 일자 상세 정보 보기

### 4. 데이터 내보내기
- CSV/Excel 다운로드
- 차트 이미지 저장

### 5. AI 인사이트
- "지난 달 대비 20% 상승했습니다"
- "최근 변동성이 높아졌습니다"
- "목표 수익률 달성까지 15% 남았습니다"

---

## 성능 최적화

### 1. Memoization
```typescript
const stats = useMemo(() => {
  // 통계 계산
}, [filteredData])

const filteredData = useMemo(() => {
  // 데이터 필터링
}, [data, period])
```

### 2. Lazy Loading
- 차트 라이브러리를 동적 import
- 초기 로딩 시간 단축

### 3. 데이터 샘플링
- 전체 기간 선택 시 데이터 포인트 간소화
- 1000개 이상일 때 샘플링 적용

---

**작성일**: 2025-11-27
**버전**: 2.0.0
